<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Submit Internship Report</title>
  <style>
    /* off-campus.css styles integrated here */
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #0b0e1b;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
    }
    .main-content-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: calc(100vh - 80px);
      padding-top: 2rem;
    }
    .navbar {
      background-color: #0b0d1d;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #333;
    }
    .logo {
      font-weight: bold;
    }
    .nav-links {
      list-style: none;
      display: flex;
      gap: 20px;
      align-items: center;
    }
    .nav-links a {
      color: #ffffff;
      text-decoration: none;
      font-size: 0.9rem;
    }
    .profile-pic {
      width: 32px;
      height: 32px;
      border-radius: 50%;
    }
    .container {
      max-width: 600px;
      width: 90%;
      background-color: #141722;
      padding: 2.5rem;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
    h2 {
      text-align: center;
      margin-bottom: 2rem;
      font-size: 1.8rem;
      color: #fff;
    }
    label {
      display: block;
      margin: 1rem 0 0.5rem;
      font-size: 0.9rem;
      font-weight: 500;
      color: #a0a0a0;
    }
    input, select {
      width: 100%;
      padding: 0.8rem 1rem;
      border-radius: 8px;
      border: 1px solid #2c2f45;
      background-color: #1a1d2d;
      color: #fff;
      font-size: 1rem;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    input:focus, select:focus {
      outline: none;
      border-color: #3a66ff;
      box-shadow: 0 0 0 2px rgba(58, 102, 255, 0.3);
    }
    input[type="file"] {
      padding: 0.6rem;
    }
    .btn {
      display: block;
      width: 100%;
      padding: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #3a66ff;
      color: #fff;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      margin-top: 2rem;
      transition: background-color 0.3s, transform 0.2s;
    }
    .btn:hover {
      background-color: #2d4dcc;
      transform: translateY(-2px);
    }
    .btn:active {
      background-color: #1a338c;
      transform: translateY(0);
    }
    @media (max-width: 768px) {
      .main-content-wrapper {
        min-height: auto;
      }
    }
    .message-box {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: #2c2f45;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      z-index: 1000;
      display: none;
      text-align: center;
      color: #fff;
    }
    .message-box.show {
      display: block;
    }
    .message-box button {
      background-color: #3a66ff;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      margin-top: 1rem;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">Internship Tracker</div>
    <ul class="nav-links">
      <li><a href="#">Dashboard</a></li>
      <li><a href="#">Reports</a></li>
      <li><a href="#">Students</a></li>
      <li><a href="#">Settings</a></li>
      <li>
        <img
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRtn_9DLMIPc7NNmhysOUQaqRdCV6dbS2Bj0A&s"
          alt="Profile"
          class="profile-pic"
        />
      </li>
    </ul>
  </nav>

  <main class="main-content-wrapper">
    <div class="container">
      <h2>Submit Internship Report</h2>
      
      <form id="internshipForm">
        <label for="orgType">Organization Type</label>
          <select id="orgType" name="orgType" required>
            <option value="">Select Organization Type</option>
            <option value="On-Campus">On-Campus</option>
            <option value="Off-Campus">Off-Campus</option>
          </select>

        <label for="companyName">Company/Organization Name</label>
        <input type="text" id="companyName" name="companyName" placeholder="Enter Company/Organization Name">

        <label for="companyAddress">Company/Organization Address</label>
        <input type="text" id="companyAddress" name="companyAddress" placeholder="Enter Address">

        <label for="industry">Industry/Field</label>
        <input type="text" id="industry" name="industry" placeholder="Enter Industry/Field">

        <label for="pocName">POC Name</label>
        <input type="text" id="pocName" name="pocName" placeholder="Enter POC Name">

        <label for="pocDesignation">POC Designation</label>
        <input type="text" id="pocDesignation" name="pocDesignation" placeholder="Enter POC Designation">

        <label for="pocContact">POC Contact Number</label>
        <input type="tel" id="pocContact" name="pocContact" placeholder="Enter Contact Number">

        <label for="pocEmail">POC Email ID</label>
        <input type="email" id="pocEmail" name="pocEmail" placeholder="Enter Email ID">

        <label for="startDate">Internship Start Date</label>
        <input type="date" id="startDate" name="startDate">

        <label for="endDate">Internship End Date</label>
        <input type="date" id="endDate" name="endDate">

        <label for="role">Internship Role</label>
        <input type="text" id="role" name="role" placeholder="Enter Internship Role">

        <label for="offerLetter">Offer Letter</label>
        <input type="file" id="offerLetter" name="offerLetter">

        <label for="guide">Guide Name</label>
        <input type="text" id="guide" name="guide" placeholder="Enter Guide Name">

        <button type="submit" class="btn" onClick="redir()">Submit Report</button>
      </form>
    </div>
  </main>

  <!-- Message Box -->
  <div id="message-box" class="message-box">
    <p id="message-text"></p>
    <button onclick="document.getElementById('message-box').classList.remove('show');">OK</button>
  </div>

  <script>
    function redir(){
      window.location.href="index2.html"
    }
form.addEventListener('submit', async (e) => {
  e.preventDefault();

  // Basic validation
  const orgType = document.getElementById('orgType').value;
  if (!orgType || orgType === '') {
    showMessage('Please select an organization type');
    return;
  }

  const formData = new FormData(form);
  
  // Debug: Log form data
  console.log('Form data being sent:');
  for (let [key, value] of formData.entries()) {
    console.log(key, value);
  }

  try {
    const response = await fetch('http://localhost:3000/api/internships', {
      method: 'POST',
      body: formData, // Don't set Content-Type header, let browser set it
    });

    console.log('Response status:', response.status);
    const data = await response.json();
    console.log('Response data:', data);
    
    if (response.ok) {
      showMessage('Report submitted successfully!');
      form.reset();
    } else {
      showMessage(`Error: ${data.message || 'Something went wrong.'}`);
    }
  } catch (error) {
    console.error('Network error:', error);
    showMessage('Network error. Failed to submit form.');
  }
});
</script>
</body>
</html>
